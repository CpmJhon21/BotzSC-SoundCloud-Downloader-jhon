<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Optikl Upload</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000000;
  --card:#0b0b0b;
  --border:#1f2937;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --green:#22c55e;
  --red:#ef4444;
}
*{box-sizing:border-box;font-family:'Inter',sans-serif}
body{margin:0;background:#000;color:var(--text)}
header{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
header .logo{color:var(--green);font-weight:700;font-size:22px}
header .menu{font-size:26px;color:var(--green)}
.container{max-width:460px;margin:32px auto;padding:0 16px}
.dropzone{background:#050505;border:2px dashed var(--border);border-radius:22px;padding:38px 20px;text-align:center}
.dropzone h2{margin:14px 0 6px;font-size:22px}
.dropzone p{margin:0;color:var(--muted)}
.btn{margin-top:18px;background:#111827;border:none;color:#fff;padding:12px 22px;border-radius:14px;font-size:15px}
.result{margin-top:26px;background:var(--card);border-radius:22px;padding:20px;text-align:center}
.result h2{color:var(--green);margin:0 0 8px}
.preview img{max-width:100%;border-radius:16px;margin-top:16px}
.url-box{margin-top:14px;background:#020202;border:1px solid var(--border);padding:10px;border-radius:14px;font-size:13px;word-break:break-all}
.actions{margin-top:14px;display:flex;gap:10px;justify-content:center}
.actions button{border:none;border-radius:14px;padding:10px 14px;font-size:14px}
.copy{background:#111827;color:#fff}
.info{background:#065f46;color:#fff}
.delete{background:#7f1d1d;color:#fff}
.history{margin-top:30px;background:var(--card);border-radius:20px;padding:18px}
.history h3{margin:0 0 12px}
.item{display:flex;justify-content:space-between;align-items:center;font-size:14px;margin-bottom:10px}
footer{margin:60px 0 24px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body>
<header>
  <div class="logo">Optikl</div>
  <div class="menu">☰</div>
</header>

<div class="container">
  <div class="dropzone" id="dropzone">
    ⬆️
    <h2>Drag & Drop or Click to Upload</h2>
    <p>Max 100MB</p>
    <button class="btn" onclick="fileInput.click()">Select File</button>
    <input type="file" id="fileInput" hidden />
  </div>

  <div id="result"></div>

  <div class="history">
    <h3>Upload History</h3>
    <div id="historyList"></div>
  </div>
</div>

<footer>© 2025 Optikl Style</footer>

<script>
const fileInput=document.getElementById('fileInput');
const dropzone=document.getElementById('dropzone');
const result=document.getElementById('result');
const historyList=document.getElementById('historyList');

fileInput.onchange=()=>upload(fileInput.files[0]);
dropzone.ondragover=e=>e.preventDefault();
dropzone.ondrop=e=>{e.preventDefault();upload(e.dataTransfer.files[0])};

function upload(file){
  if(!file) return;
  const formData=new FormData();
  formData.append('file',file);

  fetch('https://api.botzaku.eu.org/api/upload',{method:'POST',body:formData})
  .then(r=>r.json())
  .then(data=>{
    if(!data.success){alert(data.message||'Upload gagal');return;}
    const f=data.file;
    showResult(f);
    addHistory(f);
  })
  .catch(()=>alert('Upload error'));
}

function showResult(f){
  result.innerHTML=`
  <div class="result">
    <h2>Upload Successful</h2>
    <p>${f.name} • ${f.size}</p>
    <div class="preview"><img src="${f.url}"></div>
    <div class="url-box">${f.url}</div>
    <div class="actions">
      <button class="copy" onclick="copy('${f.url}')">Copy</button>
      <button class="info" onclick="window.open('${f.infoUrl}')">Info</button>
      <button class="delete" onclick="window.open('${f.deleteUrl}')">Delete</button>
    </div>
  </div>`;
}

function addHistory(f){
  const d=document.createElement('div');
  d.className='item';
  d.innerHTML=`<span>${f.name}</span><button class="copy" onclick="copy('${f.url}')">Copy</button>`;
  historyList.prepend(d);
}

function copy(t){navigator.clipboard.writeText(t).then(()=>alert('Link copied'))}
</script>
</body>
</html>
